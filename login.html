<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ“š StoryVue - Login</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Fredoka+One&family=Comic+Neue:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #b3d9ff 0%, #cce6ff 25%, #e6f2ff 50%, #f0f5ff 75%, #b3e6ff 100%);
            position: relative;
            overflow: hidden;
            font-family: 'Comic Neue', sans-serif;
        }

        .login-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(182, 193, 255, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(218, 185, 255, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(192, 203, 255, 0.3) 0%, transparent 50%);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(1deg); }
        }

        .login-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 50px;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            border: 3px solid rgba(182, 193, 255, 0.5);
            position: relative;
            z-index: 1;
            max-width: 450px;
            width: 90%;
            animation: slideInUp 0.8s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mascot-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            width: 100%;
        }

        .bookworm-mascot {
            display: flex;
            align-items: center;
            gap: 15px;
            animation: bounce 2s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }

        .bookworm-image {
            width: 80px;
            height: 67px;
            animation: wiggle 3s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
            transition: transform 0.3s ease;
        }

        .bookworm-image:hover {
            transform: scale(1.1);
        }

        .magic-wand {
            font-size: 2.5rem;
            animation: sparkle 1.5s ease-in-out infinite;
            transform: rotate(-15deg);
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.6));
        }

        .book-holder {
            font-size: 3rem;
            animation: float 2.5s ease-in-out infinite;
            animation-delay: 0.5s;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            75% { transform: rotate(-5deg); }
        }

        @keyframes sparkle {
            0%, 100% { 
                transform: rotate(-15deg) scale(1);
                filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.6));
            }
            50% { 
                transform: rotate(-15deg) scale(1.2);
                filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.8));
            }
        }

        .story-vue-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            font-weight: 700;
            margin: 0;
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e, #ffb3b3, #ffd1d1);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 4s ease-in-out infinite;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.1);
            position: relative;
            display: block;
            text-align: center;
            width: 100%;
            /* Accessibility improvements */
            color: #ff6b6b; /* Fallback color for browsers that don't support background-clip */
            line-height: 1.2;
            letter-spacing: 2px;
        }


        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .books-decoration {
            display: flex;
            gap: 10px;
            animation: float 3s ease-in-out infinite;
        }

        .book-emoji {
            font-size: 2rem;
            animation: wiggle 2s ease-in-out infinite;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        .book-emoji:nth-child(1) { animation-delay: 0s; }
        .book-emoji:nth-child(2) { animation-delay: 0.5s; }
        .book-emoji:nth-child(3) { animation-delay: 1s; }

        .subtitle {
            color: #6c5ce7;
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 500;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
            animation: fadeInUp 1s ease-out;
        }

        .tagline {
            color: #ff6b6b;
            font-size: 1.1rem;
            margin-bottom: 30px;
            font-weight: 600;
            font-style: italic;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
            animation: fadeInUp 1.2s ease-out;
            letter-spacing: 1px;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }


        .divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
            color: #6c5ce7;
            font-weight: 600;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 2px;
            background: rgba(182, 193, 255, 0.5);
        }

        .divider span {
            padding: 0 20px;
            font-size: 1.1rem;
            font-weight: 700;
            font-family: 'Comic Neue', sans-serif;
        }

        .bypass-btn {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border: none;
            border-radius: 20px;
            padding: 18px 35px;
            color: #6c5ce7;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
            width: 100%;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-family: 'Comic Neue', sans-serif;
            /* text-transform: uppercase; */
            letter-spacing: 1px;
            border: 3px solid rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .bypass-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .bypass-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(255, 215, 0, 0.4);
        }

        .bypass-btn:hover::before {
            left: 100%;
        }

        .login-form {
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 25px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: #6c5ce7;
            font-weight: 700;
            font-size: 1.1rem;
            font-family: 'Comic Neue', sans-serif;
        }

        .form-group input {
            width: 100%;
            padding: 15px 20px;
            border: 3px solid rgba(182, 193, 255, 0.5);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.9);
            color: #4a4a4a;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-family: 'Comic Neue', sans-serif;
            font-weight: 500;
            box-sizing: border-box;
        }

        .form-group input:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 0 5px rgba(255, 107, 107, 0.2);
            background: white;
            transform: scale(1.02);
        }

        .form-group input::placeholder {
            color: #999;
        }

        .login-submit-btn {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            border: none;
            border-radius: 20px;
            padding: 18px 35px;
            color: white;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
            width: 100%;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-family: 'Comic Neue', sans-serif;
            /* text-transform: uppercase; */
            letter-spacing: 1px;
            border: 3px solid rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .login-submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .login-submit-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(255, 107, 107, 0.4);
        }

        .login-submit-btn:hover::before {
            left: 100%;
        }


        .features {
            margin-top: 30px;
            text-align: left;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            color: #6c5ce7;
            font-size: 0.95rem;
        }

        .feature i {
            color: #00FFCC;
            font-size: 1.1rem;
            width: 20px;
        }

        .loading {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: #00FFCC;
            font-size: 0.9rem;
        }

        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(0, 255, 204, 0.3);
            border-top: 2px solid #00FFCC;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
            color: #ff6b6b;
            padding: 12px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
        }

        @media (max-width: 768px) {
            .login-card {
                padding: 30px 20px;
                margin: 20px;
            }
            
            .login-header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="login-card">
            <div class="login-header">
                <div class="header-content">
                    <div class="title-section">
                        <img src="assets/wormy.png" alt="StoryVue Bookworm Mascot" class="header-mascot">
                        <h1 class="story-vue-title">StoryVue</h1>
                    </div>
                    <div class="books-decoration">
                        <span class="book-emoji">ðŸ“–</span>
                        <span class="book-emoji">ðŸ“š</span>
                        <span class="book-emoji">ðŸ“–</span>
                    </div>
                </div>
                <p class="subtitle">A Magical Reading Adventure</p>
                <p class="tagline">Unlock the magic in every word!</p>
            </div>

            <form id="loginForm" class="login-form" onsubmit="event.preventDefault(); handleLogin();">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" placeholder="Enter your username" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required>
                </div>
            
                <button type="submit" class="login-submit-btn" onclick="handleLogin()">
                    <i class="fas fa-sign-in-alt"></i>
                    Let's Start Reading!
                </button>
                
                <button id="bypassBtn" class="bypass-btn" onclick="handleBypass()">
                    <i class="fas fa-rocket"></i>
                    Explore without Signing In
                </button>
            </form>

            <div id="loading" class="loading">
                <div class="spinner"></div>
                Signing you in...
            </div>

            <div id="errorMessage" class="error-message">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="errorText"></span>
            </div>

        </div>
    </div>

    <!-- Book Pages Container (Hidden Initially) -->
    <div class="book-pages-container" id="bookPages">
        <div class="book-pages">
            <!-- Left Page - Camera Window -->
            <div class="book-page">
                <div class="page-header">
                    <h2 class="page-title">StoryVue</h2>
                    <p class="page-subtitle">Unlock the magic in every word!</p>
                </div>
                
                <div class="camera-section">
                    <div class="camera-display" id="cameraDisplay">
                        <video id="videoElement" autoplay muted></video>
                    </div>
                    <div class="camera-controls">
                        <button class="camera-btn" id="startCameraBtn">Start Camera</button>
                        <button class="camera-btn" id="stopCameraBtn">Stop Camera</button>
                    </div>
                    <div class="confidence-indicator">
                        <div class="confidence-text">Book Detection Confidence: <span id="confidenceValue">0%</span></div>
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Page - Chatbot -->
            <div class="book-page">
                <div class="chatbot-section">
                    <div class="page-header">
                        <h2 class="page-title">Reading Assistant</h2>
                        <p class="page-subtitle">Your AI companion for magical reading!</p>
                    </div>
                    
                    <div class="conversation-container" id="conversationContainer">
                        <div class="message assistant">
                            <strong>StoryVue Assistant:</strong> Hello! I'm here to help you with your reading adventure. Show me a book and I'll help you understand it better!
                        </div>
                    </div>
                    
                    <div class="input-area">
                        <input type="text" id="messageInput" placeholder="Ask me about your book..." />
                        <button class="send-btn" id="sendBtn">Send</button>
                    </div>
                    
                    <div class="settings-section">
                        <h3 class="settings-title">Settings</h3>
                        <div class="setting-group">
                            <label for="voiceSelect">Voice:</label>
                            <select id="voiceSelect">
                                <option value="default">Default Voice</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label for="speechRate">Speech Rate:</label>
                            <input type="range" id="speechRate" min="0.5" max="2" step="0.1" value="1">
                        </div>
                        <div class="setting-group">
                            <label for="speechPitch">Speech Pitch:</label>
                            <input type="range" id="speechPitch" min="0.5" max="2" step="0.1" value="1">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Google OAuth configuration - will be set by server
        let GOOGLE_CLIENT_ID = '';
        
        // Initialize Google Sign-In
        function initializeGoogleSignIn() {
            if (typeof google !== 'undefined' && google.accounts) {
                google.accounts.id.initialize({
                    client_id: GOOGLE_CLIENT_ID,
                    callback: handleCredentialResponse,
                    auto_select: false
                });
            } else {
                console.error('Google Sign-In library not loaded');
                showError('Google Sign-In library failed to load. Please refresh the page.');
            }
        }

        // Handle Google Sign-In response
        function handleCredentialResponse(response) {
            showLoading(true);
            
            // Send the credential to your backend
            fetch('/api/auth/google', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    credential: response.credential
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Store the token and redirect to main app
                    localStorage.setItem('authToken', data.token);
                    localStorage.setItem('userInfo', JSON.stringify(data.user));
                    window.location.href = '/';
                } else {
                    showError(data.message || 'Authentication failed');
                }
            })
            .catch(error => {
                console.error('Auth error:', error);
                showError('Authentication failed. Please try again.');
            })
            .finally(() => {
                showLoading(false);
            });
        }

        // Show/hide loading state
        function showLoading(show) {
            const loading = document.getElementById('loading');
            const signInBtn = document.getElementById('googleSignInBtn');
            
            if (show) {
                loading.style.display = 'flex';
                signInBtn.style.display = 'none';
            } else {
                loading.style.display = 'none';
                signInBtn.style.display = 'flex';
            }
        }

        // Show error message
        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            
            errorText.textContent = message;
            errorDiv.style.display = 'block';
            
            // Hide error after 5 seconds
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        // Handle Google Sign-In button click
        document.getElementById('googleSignInBtn').addEventListener('click', () => {
            if (typeof google !== 'undefined' && google.accounts) {
                google.accounts.id.prompt();
            } else {
                showError('Google Sign-In not available. Please refresh the page.');
            }
        });

        // Handle form authentication
        function handleFormAuth(username, password) {
            // Create a user object with the provided username
            const user = {
                id: 'user-' + Date.now(),
                name: username,
                email: username.toLowerCase() + '@example.com',
                picture: 'https://via.placeholder.com/40/817FE7/FFFFFF?text=' + username.charAt(0).toUpperCase(),
                loginTime: new Date().toISOString(),
                username: username
            };
            
            // Create a JWT token
            const token = 'auth-token-' + Date.now();
            
            // Store in localStorage
            localStorage.setItem('authToken', token);
            localStorage.setItem('userInfo', JSON.stringify(user));
            
            // Show loading
            showLoading(true);
            
            // Redirect to main app after a short delay
            setTimeout(() => {
                window.location.href = '/';
            }, 1000);
        }


        // Check if user is already authenticated
        function checkAuthStatus() {
            const token = localStorage.getItem('authToken');
            if (token) {
                // Verify token with backend
                fetch('/api/auth/verify', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.valid) {
                        window.location.href = '/';
                    } else {
                        localStorage.removeItem('authToken');
                        localStorage.removeItem('userInfo');
                    }
                })
                .catch(() => {
                    localStorage.removeItem('authToken');
                    localStorage.removeItem('userInfo');
                });
            }
        }

        // Global functions for onclick handlers
        function handleLogin() {
            console.log('handleLogin called');
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            
            if (!username || !password) {
                alert('Please fill in all fields');
                return;
            }
            
            console.log('Redirecting to main page...');
            window.location.href = 'index.html';
        }
        
        function handleBypass() {
            console.log('handleBypass called');
            // Redirect to main page with book opening
            window.location.href = 'http://localhost:3000?action=openBook';
        }

        // Handle login form submission
        function handleLogin(event) {
            event.preventDefault();
            console.log('Login form submitted');
            // Redirect to main page with book opening
            window.location.href = 'http://localhost:3000?action=openBook';
        }

        // Book opening animation
        function openBook() {
            const loginCard = document.querySelector('.login-card');
            const bookPages = document.getElementById('bookPages');
            
            // Add opening animation class
            loginCard.classList.add('book-opening');
            
            // After animation completes, hide login and show book pages
            setTimeout(() => {
                loginCard.classList.add('book-opened');
                bookPages.classList.add('show');
                
                // Initialize the book pages functionality
                initializeBookPages();
            }, 800);
        }

        // Initialize book pages functionality
        function initializeBookPages() {
            // Initialize camera
            const videoElement = document.getElementById('videoElement');
            const startCameraBtn = document.getElementById('startCameraBtn');
            const stopCameraBtn = document.getElementById('stopCameraBtn');
            
            let stream = null;
            
            startCameraBtn.addEventListener('click', async () => {
                try {
                    stream = await navigator.mediaDevices.getUserMedia({ video: true });
                    videoElement.srcObject = stream;
                    startCameraBtn.style.display = 'none';
                    stopCameraBtn.style.display = 'inline-block';
                } catch (error) {
                    console.error('Error accessing camera:', error);
                }
            });
            
            stopCameraBtn.addEventListener('click', () => {
                if (stream) {
                    stream.getTracks().forEach(track => track.stop());
                    videoElement.srcObject = null;
                    startCameraBtn.style.display = 'inline-block';
                    stopCameraBtn.style.display = 'none';
                }
            });
            
            // Initialize confidence indicator (mock for now)
            updateConfidence(75);
            
            // Initialize chatbot
            initializeChatbot();
        }

        // Update confidence indicator
        function updateConfidence(percentage) {
            const confidenceValue = document.getElementById('confidenceValue');
            const confidenceFill = document.getElementById('confidenceFill');
            
            confidenceValue.textContent = percentage + '%';
            confidenceFill.style.width = percentage + '%';
        }

        // Initialize chatbot functionality
        function initializeChatbot() {
            const messageInput = document.getElementById('messageInput');
            const sendBtn = document.getElementById('sendBtn');
            const conversationContainer = document.getElementById('conversationContainer');
            
            function addMessage(text, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${isUser ? 'user' : 'assistant'}`;
                messageDiv.innerHTML = isUser ? text : `<strong>StoryVue Assistant:</strong> ${text}`;
                conversationContainer.appendChild(messageDiv);
                conversationContainer.scrollTop = conversationContainer.scrollHeight;
            }
            
            function sendMessage() {
                const message = messageInput.value.trim();
                if (message) {
                    addMessage(message, true);
                    messageInput.value = '';
                    
                    // Simulate AI response
                    setTimeout(() => {
                        const responses = [
                            "That's a great question about your book! Let me help you understand that better.",
                            "I can see you're reading something interesting! What would you like to know?",
                            "Books are magical portals to new worlds! What's your favorite part so far?",
                            "I'm here to help you with any reading questions you might have!",
                            "That's wonderful! Reading opens up so many possibilities for learning and imagination."
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        addMessage(randomResponse);
                    }, 1000);
                }
            }
            
            sendBtn.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('DOM loaded, setting up event listeners...');
            
            // Test if elements exist
            const form = document.getElementById('loginForm');
            const bypassBtn = document.getElementById('bypassBtn');
            console.log('Form element:', form);
            console.log('Bypass button element:', bypassBtn);
            
            // Skip auth check for demo
            // checkAuthStatus();
            
            // Handle form submission
            document.getElementById('loginForm').addEventListener('submit', handleLogin);

            // Handle bypass button click
            document.getElementById('bypassBtn').addEventListener('click', handleBypass);
            
            // Get Google Client ID from server
            try {
                const response = await fetch('/api/auth/google-client-id');
                const data = await response.json();
                GOOGLE_CLIENT_ID = data.clientId;
                
                if (!GOOGLE_CLIENT_ID) {
                    showError('Google OAuth not configured. Please contact administrator.');
                    return;
                }
                
                // Load Google Sign-In library
                const script = document.createElement('script');
                script.src = 'https://accounts.google.com/gsi/client';
                script.onload = initializeGoogleSignIn;
                document.head.appendChild(script);
            } catch (error) {
                console.error('Failed to load Google Client ID:', error);
                showError('Failed to initialize authentication. Please refresh the page.');
            }
        });
    </script>
<script>
    // 3D Login Card Mouse Tracking
document.addEventListener('DOMContentLoaded', function() {
    const loginCard = document.querySelector('.login-card');
    
    let isMouseMoving = false;
    let mouseTimeout;
    
    function handleMouseMove(e) {
        const rect = loginCard.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        const mouseX = e.clientX;
        const mouseY = e.clientY;
        
        // Calculate rotation based on mouse position
        const rotateX = (mouseY - centerY) / 15;
        const rotateY = (mouseX - centerX) / 12;
        
        // Limit rotation for subtle effect
        const limitedRotateX = Math.max(-15, Math.min(15, rotateX));
        const limitedRotateY = Math.max(-20, Math.min(20, rotateY));
        
        // Apply transform to your existing card
        loginCard.style.transform = `
            rotateX(${-limitedRotateX}deg) 
            rotateY(${limitedRotateY}deg) 
            scale(1.02)
        `;
        
        isMouseMoving = true;
        clearTimeout(mouseTimeout);
        
        mouseTimeout = setTimeout(() => {
            isMouseMoving = false;
            loginCard.style.transform = 'rotateX(0deg) rotateY(0deg) scale(1)';
        }, 2000);
    }
    
    document.addEventListener('mousemove', handleMouseMove);
    
    loginCard.addEventListener('mouseleave', () => {
        clearTimeout(mouseTimeout);
        loginCard.style.transform = 'rotateX(0deg) rotateY(0deg) scale(1)';
        isMouseMoving = false;
    });
});
</script>
</body>
</html>